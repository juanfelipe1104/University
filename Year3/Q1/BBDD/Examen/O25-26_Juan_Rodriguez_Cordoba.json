{
  "nombre_alumno": "Juan_Felipe_Rodriguez_Cordoba",
  "respuestas": [
    {
      "pregunta_id": 1,
      "tecnologia": "mongodb",
      "enunciado": "Realizar las operaciones necesarias para poder ejecutar las siguientes consultas de forma eficiente.",
      "codigo_respuesta": "db.zips.createIndex({population: -1}); db.zips.createIndex({state}); db.zips.createIndex({location: '2dsphere'});",
      "explicacion_opcional": "Se crean indices de population y state DESCENDING y ASCENDING correspondiente ya que la segunda consulta pide filtrar con esos campos. Se crea indice de location 2dsphere para poder filtrar en la tercera consulta usando near"
    },
    {
      "pregunta_id": 2,
      "tecnologia": "mongodb",
      "enunciado": "Obtener los 5 estados (state) que tienen la población total más alta, pero solo teniendo en cuenta aquellas ciudades (city) que tienen más de 5.000 habitantes. El resultado debe mostrar el ID del estado y el total de su población, ordenado de mayor a menor.",
      "codigo_respuesta": "db.zips.aggregate([{$match: {population: {$gt: 5000}}}, {$group: {_id: '$state', total_population: {$sum: '$population'}}}, {$sort: {total_population: -1}}, {$limit: 5}])",
      "explicacion_opcional": ""
    },
    {
      "pregunta_id": 3,
      "tecnologia": "mongodb",
      "enunciado": "Actualizar los documentos del estado de Nueva York (state: 'NY') que se encuentren a menos de 20km de las coordenadas (longitud: -73.97, latitud: 40.77) añadiendo un nuevo campo llamado zona_metropolitana con el valor booleano true.",
      "codigo_respuesta": "db.zips.updateMany({location: {$near: {$geometry: {$type: 'Point', coordinates: [-73.97, 40.77]}, $maxDistance: 20000}}}, {$set: {'zona_metropolitana': true}})",
      "explicacion_opcional": ""
    },
    {
      "pregunta_id": 4,
      "tecnologia": "redis",
      "enunciado": "La tienda recibe stock de tres juegos para la categoría 'Acción': 'Elden Ring' (50 unidades), 'Sekiro' (20 unidades) y 'Bloodborne' (15 unidades). Asimismo, para la categoría 'RPG' recibe: 'Elden Ring' (50 unidades), 'Final Fantasy' (40 unidades) y 'Starfield' (10 unidades). Almacene esta información en dos estructuras que permitan filtrar por cantidad de unidades (una consulta por categoría).",
      "codigo_respuesta": "ZADD Accion 50 EldenRing 20 Sekiro 15 Bloodborne; ZADD RPG 50 EldenRing 40 FinalFantasy 10 Starfield",
      "explicacion_opcional": "Se elige la estructura sorted sets ya que se puede interpretar el stock como score en redis"
    },
    {
      "pregunta_id": 5,
      "tecnologia": "redis",
      "enunciado": "Muestre los videojuegos de la categoría 'Acción' que tienen un stock comprendido entre 20 y 100 unidades (ambos inclusive), ordenados de menor a mayor cantidad, incluyendo el número de existencias.",
      "codigo_respuesta": "ZRANGEBYSCORE Accion 20 100 WITHSCORES",
      "explicacion_opcional": ""
    },
    {
      "pregunta_id": 6,
      "tecnologia": "redis",
      "enunciado": "Genere una nueva estructura llamada 'Multigenero' que contenga los juegos que pertenecen a AMBAS categorías (Acción y RPG), sumando las unidades totales de stock de ambos listados (una consulta, no se pide mostrarlo).",
      "codigo_respuesta": "ZUNIONSTORE Multigenero 2 Accion RPG",
      "explicacion_opcional": "AGGREGATE SUM no se añade ya que es el por defecto"
    },
    {
      "pregunta_id": 7,
      "tecnologia": "redis",
      "enunciado": "Se desea procesar las ventas de una lista de espera 'pedidos_pendientes'. Suponemos que la liste de espera se ha creado previamente y no es necesaria que la creemos nosotros. La prioridad de la lista es por posición y no por puntuación. Obtenga el próximo pedido de la lista (el más antiguo). Si no hay pedidos, el sistema debe quedarse esperando indefinidamente hasta que entre uno nuevo.",
      "codigo_respuesta": "BLPOP pedidos_pendientes 0",
      "explicacion_opcional": "timeout=0 para que se quede esperando de forma indefinida"
    },
    {
      "pregunta_id": 8,
      "tecnologia": "neo4j",
      "enunciado": "Crear tres nodos de tipo 'Almacen' (con nombres 'Norte', 'Sur' y 'Centro') y dos nodos de tipo 'Tienda' (con nombres 'T1' y 'T2'). Todos los nodos deben tener una propiedad 'activa' establecida en true. (Una sola consulta).",
      "codigo_respuesta": "UNWIND ['Norte', 'Sur', 'Centro'] as a CREATE (:Almacen {name: a, activa: true}); UNWIND ['T1', 'T2'] as t CREATE (:Tienda {name: t, activa: true})",
      "explicacion_opcional": "No encontré la forma de hacer ambos create en una sola consulta. Los hago por separado"
    },
    {
      "pregunta_id": 9,
      "tecnologia": "neo4j",
      "enunciado": "Crear una relación de tipo 'DISTRIBUYE' desde cada 'Almacen' hacia cada 'Tienda'. Cada relación debe incluir una propiedad 'distancia' con un valor aleatorio (utilizar rand()) entre 10 y 100. (Una sola consulta).",
      "codigo_respuesta": "MATCH(a:Almacen), (t:Tienda) CREATE(a)-[:DISTRIBUYE {distancia: rand()}]->(t)",
      "explicacion_opcional": "rand() no puede recibir parametros. Devuelve numero random entre 0 y 1"
    },
    {
      "pregunta_id": 10,
      "tecnologia": "neo4j",
      "enunciado": "Encontrar los nombres de los almacenes que pueden abastecer a la tienda 'T1' con una distancia menor a 50km. Devolver el nombre del almacén y la distancia.",
      "codigo_respuesta": "MATCH((a:Almacen {activa: true})-[d:DISTRIBUYE]-(t:Tienda {name: 'T1'})) WHERE d.distancia < 0.5 RETURN a.name as Almacen, d.distancia as Distancia",
      "explicacion_opcional": "Paso 50km a 0.5 porque las distancias estan entre 0 a 1"
    },
    {
      "pregunta_id": 11,
      "tecnologia": "vector_db_theory",
      "enunciado": "Explique la diferencia principal entre una búsqueda exacta (FLAT) y una búsqueda aproximada (ANN) en una base de datos de vectores. ¿En qué situación sería preferible utilizar FLAT sobre ANN según los apuntes?",
      "codigo_respuesta": "La principal diferencia entre FLAT y ANN es que FLAT realiza una busqueda exacta y ANN una busqueda aproximada. Es preferible usar FLAT sobre ANN cuando la colección es pequeña o cuando se necesita exactitud total",
      "explicacion_opcional": ""
    },
    {
      "pregunta_id": 12,
      "tecnologia": "chromadb",
      "enunciado": "Dada una colección ya inicializada como 'col', escriba la consulta necesaria para insertar un nuevo documento con el texto 'Guía de redes', ID 'net_01' y los metadatos: tema 'infraestructura' y año 2025.",
      "codigo_respuesta": "col.add(documents='Guia de Redes', metadatas={'tema': 'infraestructura', 'año': 2025}, ids='net_01')",
      "explicacion_opcional": ""
    },
    {
      "pregunta_id": 13,
      "tecnologia": "chromadb",
      "enunciado": "Escriba la consulta para buscar los 2 documentos más similares al texto 'configuración de servidores' que pertenezcan específicamente al tema 'infraestructura'.",
      "codigo_respuesta": "col.query(query_texts='configuración de servidores', n_results=2, where={'tema': 'infraestructura'})",
      "explicacion_opcional": ""
    },
    {
      "pregunta_id": 14,
      "tecnologia": "chromadb",
      "enunciado": "Realice una consulta de búsqueda semántica para el texto 'seguridad perimetral' que devuelva los 5 mejores resultados, pero filtrando para que el año sea 2024 O el tema sea 'seguridad'. Use operadores lógicos.",
      "codigo_respuesta": "col.query(query_texts='seguridad perimetral', n_results=5, where={'$or': [{'tema': 'seguridad'}, {'año': 2024}]})",
      "explicacion_opcional": ""
    }
  ]
}